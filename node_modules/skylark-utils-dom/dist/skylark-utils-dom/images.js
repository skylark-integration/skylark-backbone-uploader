/**
 * skylark-utils-dom - An Elegant HTML5 DOM utility Library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./dom","./langx","./eventer","./noder","./finder","./geom","./styler","./datax","./transforms","./query"],function(e,o,n,i,r,t,s,a,u,f){function l(e){o.isArray(e)||(e=[e]);var i=e.length,r=0,t=0,s=0,a=new o.Deferred;function u(){a.resolve({total:i,successed:t,failered:s,imgs:e})}function f(o,n){r++,n?t++:s++,a.progress({img:o,isLoaded:n,progressed:r,total:i,imgs:e}),r==i&&u()}return o.defer(function(){e.length?e.forEach(function(e){c(e)?f(e,d(e)):n.on(e,{load:function(){f(e,!0)},error:function(){f(e,!1)}})}):u()}),a.promise.totalCount=i,a.promise}function c(e){return e.complete&&void 0!==e.naturalWidth}function d(e){return e.complete&&0!==e.naturalWidth}function g(e,o){var n=[];function i(e){var o=/url\((['"])?(.*?)\1\)/gi.exec(s.css(e,"background-image")),i=o&&o[2];if(i){var r=new Image;r.src=i,n.push(r)}}if(o=o||{},"IMG"==e.nodeName)n.push(e);else{for(var t=r.findAll(e,"img"),a=0;a<t.length;a++)n.push(t[a]);if(!0===o.background)i(e);else if("string"==typeof o.background){var u=r.findAll(e,o.background);for(a=0;a<u.length;a++)i(u[a])}}return l(n)}function h(e,n){var r,a={},f=t.clientSize(e),l=n.loaded;n.failered;function c(){s.css(r,{top:(f.height-r.offsetHeight)/2+"px",left:(f.width-r.offsetWidth)/2+"px"}),u.reset(r),s.css(r,{visibility:"visible"}),l&&l()}function d(){}function g(e){r.style.visibility="hidden",r.src=e}"relative"!=(a=s.css(e,["position","overflow"])).position&&"absolute"!=a.position&&s.css(e,"position","relative"),s.css(e,"overflow","hidden"),r=new Image,s.css(r,{position:"absolute",border:0,padding:0,margin:0,width:"auto",height:"auto",visibility:"hidden"}),r.onload=c,r.onerror=d,i.append(e,r),n.url&&g(n.url);var h={load:g,dispose:function(){i.remove(r),s.css(e,a),r=r.onload=r.onerror=null}};return["vertical","horizontal","rotate","left","right","scale","zoom","zoomin","zoomout","reset"].forEach(function(e){h[e]=function(){var n=o.makeArray(arguments);n.unshift(r),u[e].apply(null,n)}}),h}function m(){return m}return f.fn.imagesLoaded=function(e){return g(this,e)},f.fn.imagesViewer=function(e){return h(this,e)},m.transform=function(e,o){},["vertical","horizontal","rotate","left","right","scale","zoom","zoomin","zoomout","reset"].forEach(function(e){m.transform[e]=u[e]}),o.mixin(m,{isCompleted:c,isLoaded:d,loaded:g,preload:function(e,n){o.isString(e)&&(e=[e]);var i=[];return e.forEach(function(e){var o=new Image;o.src=e,i.push(o)}),l(i)},viewer:h}),e.images=m});
//# sourceMappingURL=sourcemaps/images.js.map
